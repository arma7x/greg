{"id":"assets/js/scan.js","dependencies":[{"name":"/home/arma7x/Desktop/New/kaios/greg/package.json","includedInParent":true,"mtime":1656031665164},{"name":"jsqr","loc":{"line":1,"column":17,"index":17},"parent":"/home/arma7x/Desktop/New/kaios/greg/application/assets/js/scan.js","resolved":"/home/arma7x/Desktop/New/kaios/greg/node_modules/jsqr/dist/jsQR.js"},{"name":"../../app.js","loc":{"line":2,"column":23,"index":48},"parent":"/home/arma7x/Desktop/New/kaios/greg/application/assets/js/scan.js","resolved":"/home/arma7x/Desktop/New/kaios/greg/application/app.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.stop_scan = exports.start_scan = void 0;\n\nvar _jsqr = _interopRequireDefault(require(\"jsqr\"));\n\nvar _app = require(\"../../app.js\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar video;\nvar intv;\n\nvar stop_scan = function stop_scan() {\n  document.getElementById(\"qr-screen\").style.display = \"none\";\n  document.getElementById(\"cal-subs-url\").focus();\n  _app.status.view = \"subscription\";\n  console.log(\"yeah\");\n};\n\nexports.stop_scan = stop_scan;\n\nvar start_scan = function start_scan(callback) {\n  document.getElementById(\"qr-screen\").style.display = \"block\";\n  console.log(\"start\");\n  navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n  if (navigator.getUserMedia) {\n    navigator.getUserMedia({\n      audio: false,\n      video: {\n        width: 200,\n        height: 200\n      }\n    }, function (stream) {\n      video = document.querySelector(\"video\");\n      video.srcObject = stream;\n\n      video.onloadedmetadata = function (e) {\n        video.play();\n        var barcodeCanvas = document.createElement(\"canvas\");\n        intv = setInterval(function () {\n          barcodeCanvas.width = video.videoWidth;\n          barcodeCanvas.height = video.videoHeight;\n          var barcodeContext = barcodeCanvas.getContext(\"2d\");\n          var imageWidth = Math.max(1, Math.floor(video.videoWidth)),\n              imageHeight = Math.max(1, Math.floor(video.videoHeight));\n          barcodeContext.drawImage(video, 0, 0, imageWidth, imageHeight);\n          var imageData = barcodeContext.getImageData(0, 0, imageWidth, imageHeight);\n          var idd = imageData.data;\n          var code = (0, _jsqr.default)(idd, imageWidth, imageHeight);\n          console.log(code);\n\n          if (code) {\n            stop_scan();\n            callback(code.data);\n            clearInterval(intv);\n          }\n        }, 1000);\n      };\n    }, function (err) {\n      console.log(\"The following error occurred: \" + err.name);\n    });\n  } else {\n    console.log(\"getUserMedia not supported\");\n  }\n};\n\nexports.start_scan = start_scan;"},"sourceMaps":null,"error":null,"hash":"550ca42eef8a7fbb75cc79fd835dbab1","cacheData":{"env":{}}}