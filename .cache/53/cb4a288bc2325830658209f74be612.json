{"id":"assets/js/helper.js","dependencies":[{"name":"/home/arma7x/Desktop/New/kaios/greg/package.json","includedInParent":true,"mtime":1656000240012}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.validate = exports.uid = exports.top_bar = exports.toaster = exports.sort_array = exports.side_toaster = exports.screenlock = exports.pushLocalNotification = exports.pick_image = exports.notification = exports.list_files = exports.goodbye = exports.getManifest = exports.deleteFile = exports.bottom_bar = void 0;\n\nvar sort_array = function sort_array(arr, item_key, type) {\n  if (type == \"date\") {\n    arr.sort(function (a, b) {\n      var da = new Date(a[item_key]),\n          db = new Date(b[item_key]);\n      return da - db;\n    });\n  } //sort by number\n\n\n  if (type == \"number\") {\n    arr.sort(function (a, b) {\n      return b[item_key] - a[item_key];\n    });\n  } //sort by string\n\n\n  if (type == \"string\") {\n    arr.sort(function (a, b) {\n      var fa = a[item_key].toLowerCase(),\n          fb = b[item_key].toLowerCase();\n\n      if (fa < fb) {\n        return -1;\n      }\n\n      if (fa > fb) {\n        return 1;\n      }\n\n      return 0;\n    });\n  }\n};\n\nexports.sort_array = sort_array;\n\nvar uid = function uid() {\n  function _p8(s) {\n    var p = (Math.random().toString(16) + \"000000000\").substr(2, 8);\n    return s ? \"-\" + p.substr(0, 4) + \"-\" + p.substr(4, 4) : p;\n  }\n\n  return \"greg@\" + _p8() + _p8(true) + _p8(true) + _p8();\n};\n\nexports.uid = uid;\nvar notification = \"\";\nexports.notification = notification;\n\nvar notify = function notify(param_title, param_text, param_silent) {\n  var options = {\n    body: param_text,\n    silent: param_silent,\n    requireInteraction: false //actions: [{ action: \"test\", title: \"test\" }],\n\n  }; // Let's check whether notification permissions have already been granted\n\n  if (Notification.permission === \"granted\") {\n    // If it's okay let's create a notification\n    exports.notification = notification = new Notification(param_title, options);\n  } // Otherwise, we need to ask the user for permission\n\n\n  if (Notification.permission !== \"denied\") {\n    Notification.requestPermission().then(function (permission) {\n      // If the user accepts, let's create a notification\n      if (permission === \"granted\") {\n        exports.notification = notification = new Notification(param_title, options);\n      }\n    });\n  }\n}; //https://notifications.spec.whatwg.org/#dictdef-notificationaction\n\n\nvar pushLocalNotification = function pushLocalNotification(title, body) {\n  window.Notification.requestPermission().then(function (result) {\n    var notification = new window.Notification(title, {\n      body: body //requireInteraction: true,\n\n    });\n\n    notification.onerror = function (err) {\n      console.log(err);\n    };\n\n    notification.onclick = function (event) {\n      if (window.navigator.mozApps) {\n        var request = window.navigator.mozApps.getSelf();\n\n        request.onsuccess = function () {\n          if (request.result) {\n            notification.close();\n            request.result.launch();\n          }\n        };\n      } else {\n        window.open(document.location.origin, \"_blank\");\n      }\n    };\n\n    notification.onshow = function () {// notification.close();\n    };\n  });\n};\n\nexports.pushLocalNotification = pushLocalNotification;\n\nif (navigator.mozSetMessageHandler) {\n  navigator.mozSetMessageHandler(\"alarm\", function (message) {\n    console.log(JSON.stringify(message));\n    pushLocalNotification(\"Greg\", message.data.foo);\n  });\n}\n\nvar validate = function validate(url) {\n  var pattern = /(ftp|http|https):\\/\\/(\\w+:{0,1}\\w*@)?(\\S+)(:[0-9]+)?(\\/|\\/([\\w#!:.?+=&%@!\\-\\/]))?/;\n\n  if (pattern.test(url)) {\n    return true;\n  }\n\n  return false;\n};\n\nexports.validate = validate;\n\nvar getManifest = function getManifest(callback) {\n  if (!navigator.mozApps) {\n    //let t = document.getElementById(\"kaisos-ads\");\n    //t.remove();\n    return false;\n  }\n\n  var self = navigator.mozApps.getSelf();\n\n  self.onsuccess = function () {\n    callback(self.result);\n  };\n\n  self.onerror = function () {};\n}; //top toaster\n\n\nexports.getManifest = getManifest;\nvar queue = [];\nvar timeout;\n\nvar toaster = function toaster(text, time) {\n  queue.push({\n    text: text,\n    time: time\n  });\n\n  if (queue.length === 1) {\n    toast_q(text, time);\n  }\n};\n\nexports.toaster = toaster;\n\nvar toast_q = function toast_q(text, time) {\n  var x = document.querySelector(\"div#toast\");\n  x.innerHTML = queue[0].text;\n  x.style.transform = \"translate(0px, 0px)\";\n  timeout = setTimeout(function () {\n    timeout = null;\n    x.style.transform = \"translate(0px, -100px)\";\n    queue = queue.slice(1);\n\n    if (queue.length > 0) {\n      setTimeout(function () {\n        toast_q(text, time);\n      }, 1000);\n    }\n  }, time);\n}; //side toaster\n\n\nvar queue_st = [];\nvar ttimeout;\n\nvar side_toaster = function side_toaster(text, time) {\n  queue_st.push({\n    text: text,\n    time: time\n  });\n\n  if (queue_st.length === 1) {\n    toast_qq(text, time);\n  }\n};\n\nexports.side_toaster = side_toaster;\n\nvar toast_qq = function toast_qq(text, time) {\n  var x = document.querySelector(\"div#side-toast\");\n  x.innerHTML = queue_st[0].text;\n  x.style.transform = \"translate(0vh, 0px)\";\n  timeout = setTimeout(function () {\n    ttimeout = null;\n    x.style.transform = \"translate(-100vh,0px)\";\n    queue_st = queue.slice(1);\n\n    if (queue_st.length > 0) {\n      setTimeout(function () {\n        toast_qq(text, time);\n      }, 1000);\n    }\n  }, time);\n}; //bottom bar\n\n\nvar bottom_bar = function bottom_bar(left, center, right) {\n  document.querySelector(\"div#bottom-bar div#button-left\").textContent = left;\n  document.querySelector(\"div#bottom-bar div#button-center\").textContent = center;\n  document.querySelector(\"div#bottom-bar div#button-right\").textContent = right;\n\n  if (left == \"\" && center == \"\" && right == \"\") {\n    document.querySelector(\"div#bottom-bar\").style.display = \"none\";\n  } else {\n    document.querySelector(\"div#bottom-bar\").style.display = \"block\";\n  }\n}; //top bar\n\n\nexports.bottom_bar = bottom_bar;\n\nvar top_bar = function top_bar(left, center, right) {\n  document.querySelector(\"div#top-bar div.button-left\").innerHTML = left;\n  document.querySelector(\"div#top-bar div.button-center\").textContent = center;\n  document.querySelector(\"div#top-bar div.button-right\").textContent = right;\n\n  if (left == \"\" && center == \"\" && right == \"\") {\n    document.querySelector(\"div#top-bar\").style.display = \"none\";\n  } else {\n    document.querySelector(\"div#top-bar\").style.display = \"block\";\n  }\n};\n\nexports.top_bar = top_bar;\n\nvar add_script = function add_script(script) {\n  document.body.appendChild(document.createElement(\"script\")).src = script;\n};\n\nvar lock;\n\nvar screenlock = function screenlock(stat) {\n  if (typeof window.navigator.requestWakeLock === \"undefined\") {\n    return false;\n  }\n\n  if (stat == \"lock\") {\n    lock = window.navigator.requestWakeLock(\"screen\");\n\n    lock.onsuccess = function () {};\n\n    lock.onerror = function () {\n      alert(\"An error occurred: \" + this.error.name);\n    };\n  }\n\n  if (stat == \"unlock\") {\n    if (lock.topic == \"screen\") {\n      lock.unlock();\n    }\n  }\n}; //goodbye\n\n\nexports.screenlock = screenlock;\n\nvar goodbye = function goodbye() {\n  document.getElementById(\"goodbye\").style.display = \"block\";\n  bottom_bar(\"\", \"\", \"\");\n\n  if (localStorage.clickcount) {\n    localStorage.clickcount = Number(localStorage.clickcount) + 1;\n  } else {\n    localStorage.clickcount = 1;\n  }\n\n  if (localStorage.clickcount == 300000) {\n    message();\n  } else {\n    document.getElementById(\"ciao\").style.display = \"block\";\n    setTimeout(function () {\n      window.close();\n    }, 2000);\n  }\n\n  function message() {\n    document.getElementById(\"donation\").style.display = \"block\";\n    setTimeout(function () {\n      localStorage.clickcount = 1;\n      window.close();\n    }, 3000);\n  }\n}; //pick image\n\n\nexports.goodbye = goodbye;\n\nvar pick_image = function pick_image(cb) {\n  var activity = new MozActivity({\n    name: \"pick\",\n    data: {\n      type: [\"image/png\", \"image/jpg\", \"image/jpeg\"]\n    }\n  });\n\n  activity.onsuccess = function () {\n    console.log(\"Activity successfuly handled\");\n    var p = this.result.blob;\n    cb(p);\n  };\n\n  activity.onerror = function () {\n    console.log(\"The activity encouter en error: \" + this.error);\n  };\n}; //delete file\n\n\nexports.pick_image = pick_image;\n\nvar deleteFile = function deleteFile(storage, path, notification) {\n  var sdcard = navigator.getDeviceStorages(\"sdcard\");\n  var requestDel = sdcard[storage].delete(path);\n\n  requestDel.onsuccess = function () {\n    if (notification == \"notification\") {\n      toaster('File \"' + name + '\" successfully deleted frome the sdcard storage area');\n    }\n  };\n\n  requestDel.onerror = function () {\n    toaster(\"Unable to delete the file: \" + this.error);\n  };\n};\n\nexports.deleteFile = deleteFile;\n\nvar list_files = function list_files(filetype, callback) {\n  if (!navigator.getDeviceStorage) return false;\n  var d = navigator.getDeviceStorage(\"sdcard\");\n  var cursor = d.enumerate();\n\n  cursor.onsuccess = function () {\n    if (!this.result) {\n      console.log(\"finished\");\n    }\n\n    if (cursor.result.name !== null) {\n      var file = cursor.result;\n      var n = file.name.split(\".\");\n      var file_type = n[n.length - 1];\n\n      if (file_type == filetype) {\n        callback(file.name);\n      }\n\n      this.continue();\n    }\n  };\n\n  cursor.onerror = function () {\n    console.warn(\"No file found: \" + this.error);\n  };\n}; //polyfill\n\n\nexports.list_files = list_files;\n\nif (window.NodeList && !NodeList.prototype.forEach) {\n  NodeList.prototype.forEach = Array.prototype.forEach;\n}\n\nfunction hashCode(str) {\n  var hash = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    hash = ~~((hash << 5) - hash + str.charCodeAt(i));\n  }\n\n  return hash;\n}\n\nfunction intToRGB(i) {\n  var c = (i & 0x00ffffff).toString(16).toUpperCase();\n  return \"00000\".substring(0, 6 - c.length) + c;\n}\n\nfunction getRandomInteger(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nfunction share(url) {\n  var activity = new MozActivity({\n    name: \"share\",\n    data: {\n      type: \"url\",\n      url: url\n    }\n  });\n\n  activity.onsuccess = function () {};\n\n  activity.onerror = function () {\n    console.log(\"The activity encounter en error: \" + this.error);\n  };\n} //check if internet connection\n\n\nfunction check_iconnection() {\n  function updateOfflineStatus() {\n    toaster(\"Your Browser is offline\", 15000);\n    return false;\n  }\n\n  window.addEventListener(\"offline\", updateOfflineStatus);\n}\n\nfunction delete_file(filename) {\n  var sdcard = navigator.getDeviceStorages(\"sdcard\");\n  var request = sdcard[1].delete(filename);\n\n  request.onsuccess = function () {//toaster(\"File deleted\", 2000);\n  };\n\n  request.onerror = function () {//toaster(\"Unable to delete the file: \" + this.error, 2000);\n  };\n}\n\nfunction get_file(filename) {\n  var sdcard = navigator.getDeviceStorages(\"sdcard\");\n  var request = sdcard[1].get(filename);\n\n  request.onsuccess = function () {\n    var file = this.result; //alert(\"Get the file: \" + file.name);\n  };\n\n  request.onerror = function () {//alert(\"Unable to get the file: \" + this.error);\n  };\n}\n\nfunction write_file(data, filename) {\n  var sdcard = navigator.getDeviceStorages(\"sdcard\");\n  var file = new Blob([data], {\n    type: \"text/plain\"\n  });\n  var request = sdcard[1].addNamed(file, filename);\n\n  request.onsuccess = function () {\n    var name = this.result; //toaster('File \"' + name + '\" successfully wrote on the sdcard storage area', 2000);\n  }; // An error typically occur if a file with the same name already exist\n\n\n  request.onerror = function () {\n    toaster(\"Unable to write the file: \" + this.error, 2000);\n  };\n}"},"sourceMaps":null,"error":null,"hash":"8d4ce97a1d00ab995b08ddb470efd71d","cacheData":{"env":{}}}